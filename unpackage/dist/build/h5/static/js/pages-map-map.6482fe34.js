(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-map-map"],{"0635":function(t,e,a){"use strict";a.r(e);var i=a("d648"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},2159:function(t,e,a){"use strict";var i=a("50d7"),o=a.n(i);o.a},"450b":function(t,e,a){function i(t){this.key=t.key,this.requestConfig={key:t.key,s:"rsx",platform:"WXJS",appname:t.key,sdkversion:"1.2.0",logversion:"2.0"}}a("a15b"),a("acd8"),a("ac1f"),a("1276"),i.prototype.getWxLocation=function(t,e){wx.getLocation({type:"gcj02",success:function(t){var a=t.longitude+","+t.latitude;wx.setStorage({key:"userLocation",data:a}),e(a)},fail:function(a){wx.getStorage({key:"userLocation",success:function(t){t.data&&e(t.data)}}),t.fail({errCode:"0",errMsg:a.errMsg||""})}})},i.prototype.getRegeo=function(t){function e(e){var i=a.requestConfig;wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:a.key,location:e,extensions:"all",s:i.s,platform:i.platform,appname:a.key,sdkversion:i.sdkversion,logversion:i.logversion},method:"GET",header:{"content-type":"application/json"},success:function(a){var i,o,n,s,r,c,d,l,u;a.data.status&&"1"==a.data.status?(i=a.data.regeocode,o=i.addressComponent,n=[],s="",i&&i.roads[0]&&i.roads[0].name&&(s=i.roads[0].name+"附近"),r=e.split(",")[0],c=e.split(",")[1],i.pois&&i.pois[0]&&(s=i.pois[0].name+"附近",d=i.pois[0].location,d&&(r=parseFloat(d.split(",")[0]),c=parseFloat(d.split(",")[1]))),o.provice&&n.push(o.provice),o.city&&n.push(o.city),o.district&&n.push(o.district),o.streetNumber&&o.streetNumber.street&&o.streetNumber.number?(n.push(o.streetNumber.street),n.push(o.streetNumber.number)):(l="",i&&i.roads[0]&&i.roads[0].name&&(l=i.roads[0].name),n.push(l)),n=n.join(""),u=[{iconPath:t.iconPath,width:t.iconWidth,height:t.iconHeight,name:n,desc:s,longitude:r,latitude:c,id:0,regeocodeData:i}],t.success(u)):t.fail({errCode:a.data.infocode,errMsg:a.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var a=this;t.location?e(t.location):a.getWxLocation(t,(function(t){e(t)}))},i.prototype.getWeather=function(t){function e(e){var a="base";t.type&&"forecast"==t.type&&(a="all"),wx.request({url:"https://restapi.amap.com/v3/weather/weatherInfo",data:{key:i.key,city:e,extensions:a,s:o.s,platform:o.platform,appname:i.key,sdkversion:o.sdkversion,logversion:o.logversion},method:"GET",header:{"content-type":"application/json"},success:function(e){function a(t){var e={city:{text:"城市",data:t.city},weather:{text:"天气",data:t.weather},temperature:{text:"温度",data:t.temperature},winddirection:{text:"风向",data:t.winddirection+"风"},windpower:{text:"风力",data:t.windpower+"级"},humidity:{text:"湿度",data:t.humidity+"%"}};return e}var i,o;e.data.status&&"1"==e.data.status?e.data.lives?(i=e.data.lives,i&&i.length>0&&(i=i[0],o=a(i),o["liveData"]=i,t.success(o))):e.data.forecasts&&e.data.forecasts[0]&&t.success({forecast:e.data.forecasts[0]}):t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}function a(a){wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:i.key,location:a,extensions:"all",s:o.s,platform:o.platform,appname:i.key,sdkversion:o.sdkversion,logversion:o.logversion},method:"GET",header:{"content-type":"application/json"},success:function(a){var i,o;a.data.status&&"1"==a.data.status?(o=a.data.regeocode,o.addressComponent?i=o.addressComponent.adcode:o.aois&&o.aois.length>0&&(i=o.aois[0].adcode),e(i)):t.fail({errCode:a.data.infocode,errMsg:a.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var i=this,o=i.requestConfig;t.city?e(t.city):i.getWxLocation(t,(function(t){a(t)}))},i.prototype.getPoiAround=function(t){function e(e){var o={key:a.key,location:e,s:i.s,platform:i.platform,appname:a.key,sdkversion:i.sdkversion,logversion:i.logversion};t.querytypes&&(o["types"]=t.querytypes),t.querykeywords&&(o["keywords"]=t.querykeywords),wx.request({url:"https://restapi.amap.com/v3/place/around",data:o,method:"GET",header:{"content-type":"application/json"},success:function(e){var a,i,o,n;if(e.data.status&&"1"==e.data.status){if(e=e.data,e&&e.pois){for(a=[],i=0;i<e.pois.length;i++)o=0==i?t.iconPathSelected:t.iconPath,a.push({latitude:parseFloat(e.pois[i].location.split(",")[1]),longitude:parseFloat(e.pois[i].location.split(",")[0]),iconPath:o,width:22,height:32,id:i,name:e.pois[i].name,address:e.pois[i].address});n={markers:a,poisData:e.pois},t.success(n)}}else t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var a=this,i=a.requestConfig;t.location?e(t.location):a.getWxLocation(t,(function(t){e(t)}))},i.prototype.getStaticmap=function(t){function e(e){o.push("location="+e),t.zoom&&o.push("zoom="+t.zoom),t.size&&o.push("size="+t.size),t.scale&&o.push("scale="+t.scale),t.markers&&o.push("markers="+t.markers),t.labels&&o.push("labels="+t.labels),t.paths&&o.push("paths="+t.paths),t.traffic&&o.push("traffic="+t.traffic);var a=n+o.join("&");t.success({url:a})}var a,i=this,o=[],n="https://restapi.amap.com/v3/staticmap?";o.push("key="+i.key),a=i.requestConfig,o.push("s="+a.s),o.push("platform="+a.platform),o.push("appname="+a.appname),o.push("sdkversion="+a.sdkversion),o.push("logversion="+a.logversion),t.location?e(t.location):i.getWxLocation(t,(function(t){e(t)}))},i.prototype.getInputtips=function(t){var e=this,a=e.requestConfig,i={key:e.key,s:a.s,platform:a.platform,appname:e.key,sdkversion:a.sdkversion,logversion:a.logversion};t.location&&(i["location"]=t.location),t.keywords&&(i["keywords"]=t.keywords),t.type&&(i["type"]=t.type),t.city&&(i["city"]=t.city),t.citylimit&&(i["citylimit"]=t.citylimit),wx.request({url:"https://restapi.amap.com/v3/assistant/inputtips",data:i,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.tips&&t.success({tips:e.data.tips})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},i.prototype.getDrivingRoute=function(t){var e=this,a=e.requestConfig,i={key:e.key,s:a.s,platform:a.platform,appname:e.key,sdkversion:a.sdkversion,logversion:a.logversion};t.origin&&(i["origin"]=t.origin),t.destination&&(i["destination"]=t.destination),t.strategy&&(i["strategy"]=t.strategy),t.waypoints&&(i["waypoints"]=t.waypoints),t.avoidpolygons&&(i["avoidpolygons"]=t.avoidpolygons),t.avoidroad&&(i["avoidroad"]=t.avoidroad),wx.request({url:"https://restapi.amap.com/v3/direction/driving",data:i,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths,taxi_cost:e.data.route.taxi_cost||""})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},i.prototype.getWalkingRoute=function(t){var e=this,a=e.requestConfig,i={key:e.key,s:a.s,platform:a.platform,appname:e.key,sdkversion:a.sdkversion,logversion:a.logversion};t.origin&&(i["origin"]=t.origin),t.destination&&(i["destination"]=t.destination),wx.request({url:"https://restapi.amap.com/v3/direction/walking",data:i,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},i.prototype.getTransitRoute=function(t){var e=this,a=e.requestConfig,i={key:e.key,s:a.s,platform:a.platform,appname:e.key,sdkversion:a.sdkversion,logversion:a.logversion};t.origin&&(i["origin"]=t.origin),t.destination&&(i["destination"]=t.destination),t.strategy&&(i["strategy"]=t.strategy),t.city&&(i["city"]=t.city),t.cityd&&(i["cityd"]=t.cityd),wx.request({url:"https://restapi.amap.com/v3/direction/transit/integrated",data:i,method:"GET",header:{"content-type":"application/json"},success:function(e){if(e&&e.data&&e.data.route){var a=e.data.route;t.success({distance:a.distance||"",taxi_cost:a.taxi_cost||"",transits:a.transits})}},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},i.prototype.getRidingRoute=function(t){var e=this,a=e.requestConfig,i={key:e.key,s:a.s,platform:a.platform,appname:e.key,sdkversion:a.sdkversion,logversion:a.logversion};t.origin&&(i["origin"]=t.origin),t.destination&&(i["destination"]=t.destination),wx.request({url:"https://restapi.amap.com/v4/direction/bicycling",data:i,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.data&&t.success({paths:e.data.data.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},t.exports.AMapWX=i},"50d7":function(t,e,a){var i=a("d48e0");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("492dabf4",i,!0,{sourceMap:!1,shadowMode:!1})},b291:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[a("v-uni-map",{staticStyle:{width:"100%",height:"60vh"},attrs:{latitude:t.latitude,longitude:t.longitude,markers:t.markers,"include-points":t.markers,scale:10},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tap.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"inputCon"},[a("v-uni-view",{staticClass:"searchView"},[a("v-uni-text",{staticClass:"iconfont icon-sousuo"}),a("v-uni-input",{attrs:{type:"text",placeholder:"搜索地点","confirm-type":"search"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.searchFn.apply(void 0,arguments)}},model:{value:t.searchWords,callback:function(e){t.searchWords=e},expression:"searchWords"}}),a("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t._v("取消")])],1)],1),a("v-uni-view",{staticClass:"list"},t._l(t.dataTips,(function(e,i){return a("v-uni-view",{key:e.id,staticClass:"item",class:t.selectIndex==i?"active":"",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.select(e,i)}}},[a("v-uni-view",{staticClass:"name"},[t._v(t._s(e.name))]),a("v-uni-view",{staticClass:"address"},[t._v(t._s(e.district||"")+t._s(e.address||""))])],1)})),1)],1)},n=[]},d48e0:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.btns[data-v-4b5243f1]{position:fixed;top:0;left:0;height:%?50?%;width:100%;background:-webkit-linear-gradient(top,rgba(0,0,0,.4),transparent);background:linear-gradient(180deg,rgba(0,0,0,.4),transparent);display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;z-index:10!important}.btns uni-view[data-v-4b5243f1]{margin:%?50?% %?24?% 0;font-size:%?30?%}.btns uni-view[data-v-4b5243f1]:first-child{color:#fff}.btns uni-view[data-v-4b5243f1]:last-child{width:%?100?%;height:%?60?%;line-height:%?60?%;text-align:center;border-radius:%?10?%;background:#e13500;color:#fff}.content .list[data-v-4b5243f1]{height:calc(40vh - %?100?%);overflow-y:auto;width:%?702?%;margin:%?-40?% auto 0;padding-bottom:%?20?%}.content .list .item[data-v-4b5243f1]{border-bottom:%?2?% solid #f3f3f3}.content .list .item[data-v-4b5243f1]:last-child{border:none}.content .list .item .address[data-v-4b5243f1]{font-size:%?22?%;color:#666;margin:%?10?% 0}.content .list .item .name[data-v-4b5243f1]{font-size:%?30?%;color:#333;margin-top:%?10?%}.content .list .item.active .name[data-v-4b5243f1]{font-weight:700;color:#e13500}.content .list .item.active .address[data-v-4b5243f1]{color:#e13500}.content .inputCon[data-v-4b5243f1]{width:100%;background:#fff;top:%?-60?%;position:relative;z-index:20;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.content .inputCon .searchView[data-v-4b5243f1]{margin-top:%?70?%;width:%?702?%;height:%?60?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:%?60?%;border-radius:%?40?%;padding:0 %?30?%;box-sizing:border-box;background:#f3f3f3;font-size:%?26?%}.content .inputCon .searchView .iconfont[data-v-4b5243f1]{color:#666;margin-right:%?20?%}.content .inputCon .searchView uni-input[data-v-4b5243f1]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.content .inputCon .searchView uni-view[data-v-4b5243f1]{-webkit-flex-shrink:0;flex-shrink:0}',""]),t.exports=e},d648:function(t,e,a){"use strict";a("ac1f"),a("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("450b"),o=new i.AMapWX({key:"c39f44474fba52cb4f1a7d5a192fcdfb"}),n={data:function(){return{selectIndex:void 0,selectAddr:{},searchWords:"",id:0,title:"map",latitude:39.909,longitude:116.39742,markers:[{latitude:39.909,longitude:116.39742,width:30,height:30,iconPath:"../../static/didian.png"}],dataTips:[]}},onLoad:function(t){var e=this;t&&t.lng&&(this.longitude=t.lng,this.markers[0].longitude=this.longitude),t&&t.lat&&(this.latitude=t.lat,this.markers[0].latitude=this.latitude),o.getPoiAround({success:function(t){console.log("获取当前的列表",t),e.dataTips=t.poisData},fail:function(t){console.log(t)}})},methods:{checkAdd:function(){console.log("点我1"),uni.setStorageSync("address",this.markers[0]);var t=getCurrentPages(),e=t[t.length-2];e.$vm.addressObj=this.selectAddr,uni.navigateBack()},back:function(){uni.navigateBack()},cancel:function(){var t=this;console.log("点我2"),this.searchWords&&(this.searchWords="",o.getPoiAround({location:this.markers[0].longitude+","+this.markers[0].latitude,success:function(e){t.dataTips=e.poisData},fail:function(t){console.log(t)}}))},reserGeo:function(){console.log("点我3"),o.getRegeo({success:function(t){},fail:function(t){console.log(t)}})},select:function(t,e){if(t){this.selectIndex=e;var a=t.location.split(",");this.selectAddr={address:t.pname?t.pname+t.cityname+t.adname+t.address:t.district+t.address,latitude:a[1],longitude:a[0]},this.markers[0].latitude=+a[1],this.markers[0].longitude=+a[0];var i=getCurrentPages(),o=i[i.length-2];o.$vm.model.location=t.cityname+t.name,uni.navigateBack()}},tap:function(t){var e=this;console.log("点我5");var a=t.detail.longitude+","+t.detail.latitude;o.getRegeo({location:a,success:function(a){e.selectAddr={address:a[0].regeocodeData.formatted_address,latitude:t.detail.latitude,longitude:t.detail.longitude},e.markers[0].latitude=a[0].latitude,e.markers[0].longitude=a[0].longitude,o.getPoiAround({location:a[0].longitude+","+a[0].latitude,success:function(t){console.log("获取当前的列表",t),e.dataTips=t.poisData},fail:function(t){console.log(t)}})},fail:function(t){console.log(t)}})},searchFn:function(){var t=this;o.getInputtips({keywords:this.searchWords,location:"",success:function(e){console.log(111,e),e&&e.tips&&(t.dataTips=e.tips)},fail:function(t){console.log(222,t)}})}}};e.default=n},ea49:function(t,e,a){"use strict";a.r(e);var i=a("b291"),o=a("0635");for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("2159");var s,r=a("f0c5"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"4b5243f1",null,!1,i["a"],s);e["default"]=c.exports}}]);